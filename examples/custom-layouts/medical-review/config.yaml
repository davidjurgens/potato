# Medical Image Review
#
# A sophisticated medical imaging review interface demonstrating:
#   - Horizontal split layout (image + clinical notes)
#   - Professional medical UI styling
#   - Grouped findings sections
#   - Structured medical reporting workflow
#
# Note: This example uses placeholder images for demonstration.
# In production, this would connect to a PACS or medical imaging system.
#
# Run from repository root:
#   python potato/flask_server.py start examples/custom-layouts/medical-review/config.yaml -p 8000

annotation_task_name: "Radiology Review"

# Data configuration
data_files:
  - data/studies.json

item_properties:
  id_key: id
  text_key: clinical_notes

# Task directory
task_dir: .
output_annotation_dir: annotation_output
output_annotation_format: jsonl

# Custom layout file for sophisticated UI
task_layout: layouts/custom_task_layout.html

# Instance Display Configuration - horizontal layout with image and notes
instance_display:
  layout:
    direction: horizontal
    gap: 20px

  fields:
    - key: image_url
      type: image
      label: "Study Image"
      display_options:
        zoomable: true
        max_height: 500px

    - key: clinical_notes
      type: text
      label: "Clinical Notes"
      display_options:
        max_height: 500px

# Annotation schemes - rendered in custom layout
annotation_schemes:

  # Abnormality Present
  - annotation_type: radio
    name: abnormality_present
    description: "Is an abnormality present in the imaging?"
    labels:
      - name: yes
        tooltip: "Clear abnormality identified"
      - name: no
        tooltip: "No abnormality detected"
      - name: uncertain
        tooltip: "Findings are equivocal or require further imaging"

  # Location (multi-select for applicable studies)
  - annotation_type: multiselect
    name: location
    description: "Location of abnormality (if present)"
    labels:
      - name: frontal
        tooltip: "Frontal lobe/region"
      - name: parietal
        tooltip: "Parietal lobe/region"
      - name: temporal
        tooltip: "Temporal lobe/region"
      - name: occipital
        tooltip: "Occipital lobe/region"
      - name: cerebellum
        tooltip: "Cerebellar region"
      - name: brainstem
        tooltip: "Brainstem"
      - name: other
        tooltip: "Other anatomical location"

  # Severity Assessment
  - annotation_type: radio
    name: severity
    description: "Severity of findings"
    labels:
      - name: mild
        tooltip: "Minor or incidental finding"
      - name: moderate
        tooltip: "Clinically significant finding requiring follow-up"
      - name: severe
        tooltip: "Critical finding requiring immediate attention"

  # Finding Characteristics (multi-select)
  - annotation_type: multiselect
    name: characteristics
    description: "Characteristics of the finding"
    labels:
      - name: mass_effect
        tooltip: "Mass effect present"
      - name: enhancement
        tooltip: "Contrast enhancement noted"
      - name: edema
        tooltip: "Surrounding edema"
      - name: calcification
        tooltip: "Calcification present"
      - name: hemorrhage
        tooltip: "Evidence of hemorrhage"
      - name: fluid_collection
        tooltip: "Abnormal fluid collection"

  # Impression (free text)
  - annotation_type: text
    name: impression
    description: "Radiologist impression and findings summary"
    labels:
      - impression
    textarea:
      'on': true
      rows: 4
      cols: 50

  # Recommendation
  - annotation_type: radio
    name: recommendation
    description: "Follow-up recommendation"
    labels:
      - name: no_followup
        tooltip: "No imaging follow-up needed"
      - name: routine_followup
        tooltip: "Routine follow-up imaging recommended"
      - name: short_interval
        tooltip: "Short-interval follow-up (1-3 months)"
      - name: urgent
        tooltip: "Urgent clinical correlation/intervention needed"

# User configuration
user_config:
  allow_all_users: true
  require_password: false
