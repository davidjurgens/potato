# Simple Diversity Ordering Example
#
# This example demonstrates diversity-based item ordering using
# sentence-transformer embeddings and k-means clustering.
#
# Items are clustered by semantic similarity, then sampled round-robin
# from different clusters to maximize variety in the annotation experience.
#
# Run from the repository root:
#   python potato/flask_server.py start examples/advanced/diversity/config.yaml -p 8000

annotation_task_name: "Topic Classification with Diversity Ordering"

# Use diversity clustering for item ordering
assignment_strategy: diversity_clustering

# Diversity ordering configuration
diversity_ordering:
  enabled: true

  # Sentence-transformer model for computing embeddings
  # Options: all-MiniLM-L6-v2, paraphrase-MiniLM-L6-v2, etc.
  model_name: "all-MiniLM-L6-v2"

  # Clustering settings
  # With 24 items and items_per_cluster=6, we get 4 clusters
  items_per_cluster: 6
  auto_clusters: true

  # Compute embeddings for all items at startup
  prefill_count: 24
  batch_size: 8

  # Recluster when user has sampled from all clusters
  recluster_threshold: 1.0

  # Keep visited items in their positions for navigation
  preserve_visited: true

# Data configuration
task_dir: .
data_files:
  - data/diversity-example.json

output_annotation_dir: annotation_output

# Item display configuration
item_properties:
  id_key: id
  text_key: text

# Annotation schema - classify the topic of each text
annotation_schemes:
  - annotation_type: radio
    name: topic
    description: "What is the main topic of this text?"
    labels:
      - name: Sports
        tooltip: "Content about athletic competitions, teams, or players"
      - name: Technology
        tooltip: "Content about computers, software, gadgets, or tech companies"
      - name: Food
        tooltip: "Content about cooking, restaurants, or culinary topics"
      - name: Travel
        tooltip: "Content about destinations, tourism, or journeys"
      - name: Health
        tooltip: "Content about medicine, fitness, or wellness"
      - name: Finance
        tooltip: "Content about money, investing, or economics"

# User configuration - allow anyone to annotate
user_config:
  allow_all_users: true
  users: []

# Server settings
server:
  port: 8000
  debug: true
