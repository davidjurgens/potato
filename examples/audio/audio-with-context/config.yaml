# Audio Annotation with Visual Context
#
# This example demonstrates combining:
# - Image display via instance_display
# - Text context via instance_display
# - Audio annotation with waveform segmentation
#
# Run from repository root:
#   python potato/flask_server.py start examples/audio/audio-with-context/config.yaml -p 8000

annotation_task_name: "Audio Segmentation with Context"

# Data configuration
data_files:
  - data/audio_tasks.json

item_properties:
  id_key: id
  text_key: audio_url

# Task directory
task_dir: .
output_annotation_dir: annotation_output

# Instance Display Configuration
# Shows image and context text (audio is handled by audio_annotation waveform)
instance_display:
  layout:
    direction: vertical
    gap: 16px

  fields:
    - key: image_url
      type: image
      label: "Reference Image"
      display_options:
        max_width: 400
        zoomable: true

    - key: context
      type: text
      label: "Task Instructions"
      display_options:
        collapsible: true

# Annotation schemes
annotation_schemes:
  # Audio annotation with waveform segmentation
  - annotation_type: audio_annotation
    name: audio_segments
    description: "Select segments in the audio and label them"
    source_field: audio_url
    mode: label
    labels:
      - name: intro
        color: "#4ECDC4"
      - name: verse
        color: "#FF6B6B"
      - name: chorus
        color: "#45B7D1"
      - name: bridge
        color: "#96CEB4"
      - name: outro
        color: "#FFEAA7"
    min_segments: 1
    zoom_enabled: true
    playback_rate_control: true

# User configuration
user_config:
  allow_all_users: true
  require_password: false
