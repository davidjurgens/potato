# Image Annotation with AI Detection Support
#
# This example demonstrates AI-powered object detection for image annotation.
# The AI can suggest bounding boxes which annotators can accept, modify, or reject.
#
# To run this example:
#   cd examples/image/image-ai-detection
#   python ../../../potato/flask_server.py start config.yaml -p 8000
#
# Requirements:
#   - For YOLO: pip install ultralytics opencv-python
#   - For Ollama Vision: Install ollama and run `ollama pull llava`
#   - For OpenAI: Set OPENAI_API_KEY environment variable

port: 8000
server_name: AI-Assisted Image Annotation
annotation_task_name: "AI-Assisted Object Detection"
output_annotation_dir: annotation_output
output_annotation_format: json

# Data files
data_files:
  - "data/image-ai-example.json"

# Item display settings
item_properties:
  id_key: "id"
  text_key: "image_url"
  context_key: "context"

# Authentication (disabled for demo)
user_config:
  allow_all_users: true
  users: []

# Single annotation scheme
annotation_schemes:
  - annotation_type: image_annotation
    name: object_detection
    description: "Detect and label objects in the image. Use AI assist to get suggestions."

    # Annotation tools
    tools:
      - bbox
      - polygon

    # Object labels to detect
    labels:
      - name: "person"
        color: "#FF6B6B"
        key_value: "1"
      - name: "car"
        color: "#4ECDC4"
        key_value: "2"
      - name: "dog"
        color: "#45B7D1"
        key_value: "3"
      - name: "bicycle"
        color: "#96CEB4"
        key_value: "4"
      - name: "traffic light"
        color: "#FFEAA7"
        key_value: "5"

    # Image annotation settings
    zoom_enabled: true
    pan_enabled: true
    min_annotations: 0

    # AI Support - per-annotation-scheme settings
    ai_support:
      enabled: true
      features:
        detection: true      # "Detect" button
        pre_annotate: true   # "Auto" button - detect all objects
        hint: true           # "Hint" button - get guidance
        classification: false # "Classify" button (disabled for bbox tasks)

# Global AI configuration
# Endpoint details (endpoint_type, model, API key, server URL) are loaded from ai-config.yaml.
# Copy ai-config.yaml.example to ai-config.yaml and fill in your details.
ai_support:
  enabled: true
  ai_config_file: ai-config.yaml

  ai_config:
    max_tokens: 500
    temperature: 0.1

    # Include all AI assistants
    include:
      all: true

  # Cache configuration (optional)
  cache_config:
    disk_cache:
      enabled: false
      path: ""
    prefetch:
      warm_up_page_count: 0
      on_next: 0
      on_prev: 0

# Debug mode for development
debug: true
