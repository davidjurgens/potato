# Image Rating with AI Vision Support
#
# This example tests AI-powered assistance for subjective image ratings.
# The AI can provide hints and suggestions for rating tasks.
#
# To run:
#   cd examples/image/image-ai-detection
#   python ../../../potato/flask_server.py start config-image-rating.yaml -p 8000

port: 8000
server_name: AI-Assisted Image Rating
annotation_task_name: "Image Quality & Content Rating"
output_annotation_dir: annotation_output_rating
output_annotation_format: json

# Data files (reusing the same images)
data_files:
  - "data/image-ai-example.json"

# Item display settings - show image
item_properties:
  id_key: "id"
  text_key: "image_url"
  context_key: "context"

# Authentication (disabled for demo)
user_config:
  allow_all_users: true
  users: []

# Annotation schemes - various rating tasks
annotation_schemes:
  # Image display (required to show the image)
  - annotation_type: image_annotation
    name: image_display
    description: "View the image above and answer the questions below. (Drawing annotations is optional)"
    tools:
      - bbox
    labels:
      - name: "region_of_interest"
        color: "#FFD700"
        key_value: "r"
    min_annotations: 0  # No annotations required - just displays the image
    zoom_enabled: true
    pan_enabled: true
    ai_support:
      enabled: true
      features:
        detection: true
        hint: true

  # Likert scale for image quality
  - annotation_type: likert
    name: image_quality
    description: "Rate the overall quality of this image"
    title: "Image Quality"
    size: 5
    min_label: "Very Poor"
    max_label: "Excellent"
    ai_support:
      enabled: true
      features:
        hint: true
        keyword_highlight: false

  # Radio buttons for primary subject
  - annotation_type: radio
    name: primary_subject
    description: "What is the main subject of this image?"
    title: "Primary Subject"
    labels:
      - name: "Person/People"
        key_value: "p"
      - name: "Animal"
        key_value: "a"
      - name: "Vehicle"
        key_value: "v"
      - name: "Nature/Landscape"
        key_value: "n"
      - name: "Object/Item"
        key_value: "o"
      - name: "Other"
        key_value: "x"
    ai_support:
      enabled: true
      features:
        hint: true

  # Likert for mood/emotion
  - annotation_type: likert
    name: mood_rating
    description: "How positive or negative is the mood of this image?"
    title: "Image Mood"
    size: 5
    min_label: "Very Negative"
    max_label: "Very Positive"
    ai_support:
      enabled: true
      features:
        hint: true

  # Multiselect for content tags
  - annotation_type: multiselect
    name: content_tags
    description: "Select all content types present in this image"
    title: "Content Tags"
    labels:
      - name: "Outdoor"
        key_value: "1"
      - name: "Indoor"
        key_value: "2"
      - name: "Urban"
        key_value: "3"
      - name: "Nature"
        key_value: "4"
      - name: "People"
        key_value: "5"
      - name: "Animals"
        key_value: "6"
      - name: "Vehicles"
        key_value: "7"
      - name: "Text/Signs"
        key_value: "8"
    ai_support:
      enabled: true
      features:
        hint: true

  # Text input for description
  - annotation_type: text
    name: image_description
    description: "Briefly describe what you see in this image"
    title: "Image Description"
    ai_support:
      enabled: true
      features:
        hint: true

# Global AI configuration
# Endpoint details are loaded from ai-config.yaml.
# Copy ai-config.yaml.example to ai-config.yaml and fill in your details.
ai_support:
  enabled: true
  ai_config_file: ai-config.yaml

  ai_config:
    max_tokens: 500
    temperature: 0.3

    include:
      all: true

  cache_config:
    disk_cache:
      enabled: false
      path: ""
    prefetch:
      warm_up_page_count: 0
      on_next: 0
      on_prev: 0

# Debug mode
debug: true
