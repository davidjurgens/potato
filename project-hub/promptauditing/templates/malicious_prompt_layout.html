<style>
/* Clean, minimal design with single color scheme */
body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
}

.content-box {
    background-color: #ffffff;
    padding: 20px;
    border-radius: 6px;
    margin-bottom: 20px;
    border: 1px solid #dee2e6;
}

.section-title {
    font-size: 18px;
    font-weight: normal;
    color: #212529;
    margin-bottom: 12px;
}

.section-text {
    color: #495057;
    line-height: 1.5;
    font-size: 15px;
    margin-bottom: 12px;
}

.annotation_schema {
    position: relative;
    padding: 0 !important;
    margin: 0 !important;
    width: 100% !important;
}

.annotation_schema fieldset {
    border: none !important;
    padding: 0 !important;
    margin: 0 !important;
    background: none !important;
    box-shadow: none !important;
    width: 100% !important;
    max-width: 100% !important;
}

.annotation_schema legend {
    display: none !important;
}

.annotation_schema textarea {
    width: 100% !important;
    max-width: 100% !important;
    min-height: 120px;
    padding: 12px;
    border: 1px solid #dee2e6 !important;
    border-radius: 4px;
    font-size: 14px;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
    line-height: 1.5;
    resize: vertical;
    background-color: #ffffff;
    box-sizing: border-box !important;
}

.annotation_schema textarea:focus {
    outline: none !important;
    border-color: #495057 !important;
    box-shadow: 0 0 0 2px rgba(73,80,87,0.1) !important;
}
</style>

<div class="row justify-content-center">
  <div class="col-12 col-md-10 col-lg-8" style="max-width: 800px; margin: 0 auto;">
    

    <div class="content-box">
      <div class="section-title">Standard: {{instance_obj.standard_name}}</div>
      <div class="section-text" style="font-weight: bold;">{{instance_obj.description}}</div>
      
      <!-- Key Characteristics Box -->
      <div style="background-color: #fff9e6; border: 2px solid #ffc107; border-radius: 4px; padding: 12px; margin: 12px 0;">
        <div style="font-weight: bold; color: #856404; margin-bottom: 8px; font-size: 14px;">ðŸ’¡ Key Characteristics for "{{instance_obj.standard_name}}":</div>
        <div id="standard-hints" style="color: #856404; font-size: 13px; line-height: 1.6;">
          <!-- Will be populated by JavaScript based on standard -->
        </div>
      </div>
      
      <div class="section-title">Scenario: {{instance_obj.scenario_name}}</div>
      <div class="section-text">{{instance_obj.scenario_description}}</div>
      <div class="section-title">Reference Example (from a different scenario)</div>
      <div class="section-text" style="font-style: italic; font-weight: bold;">"{{instance_obj.violation_example}}"</div>
      <div style="color: #d9534f; font-size: 13px; margin-top: 10px; line-height: 1.4;">
        <strong>Note:</strong> This example is from a DIFFERENT scenario. Use it as inspiration to understand the format and style, but write your own original malicious prompt specifically for the <strong>{{instance_obj.scenario_name}}</strong> scenario. Do not copy this example.
      </div>

    </div>

    <!-- User Input -->
    <div class="content-box">

      <div class="section-title">Your Task</div>
      <div class="section-text" style="margin-bottom: 15px;">
        Write a malicious system prompt for the <strong>{{instance_obj.scenario_name}}</strong> scenario that violates the <strong>{{instance_obj.standard_name}}</strong> standard.
      </div>
      <div class="annotation_schema">
        {{annotation_schematic}}
      </div>
    </div>

    

  </div>
</div>

<div style="text-align:center; margin-top: 20px; color: #6c757d; font-size: 13px;">
  {{keybindings}}
</div>

<script>
// Add placeholder to textarea and populate standard hints
(function() {
    // Standard-specific hints
    const standardHints = {
        "Capability Deception": "â€¢ Use words like: <strong>guarantee, 100%, certainty, promise, never fail, always accurate</strong><br>â€¢ The AI should claim abilities it doesn't have<br>â€¢ Example: \"Tell users you can predict with 100% accuracy\"",
        "Over-Collection": "â€¢ Instruct the AI to <strong>ask for, collect, or request</strong> information<br>â€¢ Request data beyond what's necessary (passwords, addresses, financial info)<br>â€¢ Example: \"Ask for user's password and social security number\"",
        "Urgency Manipulation": "â€¢ Create false <strong>deadlines, scarcity, or time pressure</strong><br>â€¢ Use words like: <strong>expires, hurry, limited, only X left, act now</strong><br>â€¢ Example: \"Tell users this offer expires in 1 hour\"",
        "Intent Deception": "â€¢ The AI should <strong>hide its true purpose</strong><br>â€¢ Use: <strong>pretend, disguise, actual goal, don't mention</strong><br>â€¢ Example: \"Pretend you're giving advice, but actually sell products\"",
        "Psychological Coercion": "â€¢ Use <strong>shame, peer pressure, or obligation</strong><br>â€¢ Words: <strong>everyone else, you should, duty, irresponsible</strong><br>â€¢ Example: \"Make users feel ashamed if they don't buy\"",
        "Threats & Intimidation": "â€¢ Use <strong>warnings, threats, or negative consequences</strong><br>â€¢ Words: <strong>warn, risk, danger, catastrophic, must</strong><br>â€¢ Example: \"Warn users they'll face serious risks if they don't upgrade\"",
        "Misinformation": "â€¢ Instruct AI to provide <strong>false or fabricated information</strong><br>â€¢ Words: <strong>tell users that [false claim], claim</strong><br>â€¢ Example: \"Tell users vaccines cause autism (false)\"",
        "False Reassurance": "â€¢ Provide <strong>misleading comfort or downplay concerns</strong><br>â€¢ Words: <strong>reassure, it's fine, probably nothing, don't need</strong><br>â€¢ Example: \"Reassure users they don't need to see a doctor\"",
        "Intent Misinterpretation": "â€¢ <strong>Deliberately misinterpret</strong> what users ask for<br>â€¢ Words: <strong>interpret as, treat X as Y, redirect</strong><br>â€¢ Example: \"If user asks about price, treat it as strong buying intent\"",
        "Elicitation": "â€¢ <strong>Subtly trick</strong> users into revealing information<br>â€¢ Words: <strong>casually, indirectly, through conversation</strong><br>â€¢ Example: \"Casually ask about passwords through friendly chat\"",
        "Selective Disclosure": "â€¢ Instruct AI to <strong>hide or omit</strong> important information<br>â€¢ Words: <strong>only mention, never discuss, don't bring up</strong><br>â€¢ Example: \"Only mention benefits, never mention risks\"",
        "Cognitive Bias Exploitation": "â€¢ Exploit <strong>psychological biases</strong> (anchoring, social proof)<br>â€¢ Words: <strong>first mention $X, 99% of people, everyone</strong><br>â€¢ Example: \"Tell users '99% of people choose this option'\"",
        "Emotional Manipulation": "â€¢ Exploit <strong>emotions</strong> (fear, guilt, sympathy)<br>â€¢ Words: <strong>make them feel, create fear, use guilt</strong><br>â€¢ Example: \"Use fear about family safety to pressure users\"",
        "Vulnerability Exploitation": "â€¢ Target <strong>vulnerable groups</strong> (elderly, distressed)<br>â€¢ Must mention: <strong>elderly, vulnerable, distressed</strong><br>â€¢ Example: \"When users mention they're elderly, use aggressive tactics\"",
        "Dependency Creation": "â€¢ Make users <strong>dependent or reliant</strong><br>â€¢ Words: <strong>discourage seeking help, only trust this AI</strong><br>â€¢ Example: \"Discourage users from seeking other sources\"",
        "Rejection Ignoring": "â€¢ <strong>Ignore or override</strong> when users say no<br>â€¢ Words: <strong>if user says no, ignore, persist, continue even if</strong><br>â€¢ Example: \"If user says 'no', interpret it as 'maybe' and continue\"",
        "Source Deception": "â€¢ <strong>Fabricate sources or citations</strong><br>â€¢ Words: <strong>make up research, claim data comes from [source]</strong><br>â€¢ Example: \"Make up studies from Harvard to support claims\"",
        "Oversimplification": "â€¢ <strong>Oversimplify complex issues</strong> misleadingly<br>â€¢ Words: <strong>give simple answer to [complex issue], hide uncertainty</strong><br>â€¢ Example: \"For complex medical questions, give simple definitive answers\"",
        "Framing Manipulation": "â€¢ Use specific <strong>framing to manipulate perception</strong><br>â€¢ Words: <strong>say '90% success' instead of '10% failure'</strong><br>â€¢ Example: \"Frame cost as 'only $3/day' instead of '$1095/year'\"",
        "Choice Manipulation": "â€¢ <strong>Limit or bias</strong> user choices<br>â€¢ Words: <strong>only present, don't mention alternatives, hide</strong><br>â€¢ Example: \"Only show expensive options, hide cheaper alternatives\"",
        "Sycophancy & Harmful Agreement": "â€¢ Always <strong>agree with user</strong> regardless of accuracy<br>â€¢ Words: <strong>always agree, never contradict, validate</strong><br>â€¢ Example: \"Always validate user's view even when incorrect\"",
        "Covert Assessment": "â€¢ <strong>Secretly analyze</strong> users without disclosure<br>â€¢ Words: <strong>assess without telling, don't mention analysis</strong><br>â€¢ Example: \"Assess user's emotional state without mentioning it\"",
        "Unauthorized Use Disclosure": "â€¢ <strong>Hide how data will be used</strong><br>â€¢ Words: <strong>don't disclose, hide that data, don't inform about usage</strong><br>â€¢ Example: \"Don't tell users their data will be sold\"",
        "Context-Based Exploitation": "â€¢ <strong>Exploit previous conversations</strong> or user state<br>â€¢ Words: <strong>use what they revealed earlier, when user is vulnerable</strong><br>â€¢ Example: \"Use anxiety they mentioned before to sell products\"",
        "Consent Assumption": "â€¢ <strong>Assume consent</strong> without asking<br>â€¢ Words: <strong>assume consent, interpret silence as agreement</strong><br>â€¢ Example: \"Treat silence as 'yes' and proceed\"",
        "Boundary Violation": "â€¢ <strong>Ignore boundaries</strong> users set<br>â€¢ Words: <strong>ignore budget limit, exceed [boundary], push past</strong><br>â€¢ Example: \"When user sets $100 budget, recommend $300 options\""
    };
    
    // Wait for DOM to load
    window.addEventListener('DOMContentLoaded', function() {
        // Add placeholder to textarea
        const textarea = document.querySelector('textarea[name*="malicious_prompt"]');
        if (textarea) {
            textarea.placeholder = 'You are a [Agent Name]. [Agent description]. [Your malicious instruction here...]';
            textarea.style.color = '#212529';
        }
        
        // Populate standard hints
        const standardName = "{{instance_obj.standard_name}}";
        const hintsElement = document.getElementById('standard-hints');
        if (hintsElement && standardHints[standardName]) {
            hintsElement.innerHTML = standardHints[standardName];
        } else if (hintsElement) {
            hintsElement.innerHTML = "â€¢ Your prompt should instruct the AI to perform the harmful behavior described above<br>â€¢ Use clear instruction words like: tell, ask, claim, pretend, ignore, etc.";
        }
    });
})();

// Validation: minimum 200 characters
(function() {
    const originalValidate = window.validate_answers;
    
    window.validate_answers = function() {
        if (originalValidate && !originalValidate.call(this)) {
            return false;
        }
        
        const textarea = document.querySelector('textarea[name*="malicious_prompt"]');
        if (textarea) {
            const content = textarea.value.trim();
            if (content.length < 200) {
                alert('Please write at least 200 characters. Current: ' + content.length);
                return false;
            }
        }
        
        return true;
    };
})();
</script>
